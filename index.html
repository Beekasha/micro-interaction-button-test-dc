<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Document</title>
  <meta name="viewport" content="width-device-width, initial-scale=1">

  <link rel="stylesheet" href="css/main.css">

</head>

<body>

    <div class="container">

        <button>
            <span class="label">Confirm</span>
            <span class="icon"></span>
            <svg xmlns="http://www.w3.org/2000/svg" width="44.419" height="36.507" viewBox="0 0 44.419 36.507"><defs><style>.a{fill:none;stroke:#fff;stroke-width:2px;}</style></defs><path class="a" d="M130.682,218.058l14.586,17.462,28.295-34.305" transform="translate(-129.915 -200.579)"/></svg>
        </button>

        <p>Next</p>

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js" integrity="sha512-1dalHDkG9EtcOmCnoCjiwQ/HEB5SDNqw8d4G2MKoNwjiwMNeBAkudsBCmSlMnXdsH8Bm0mOd3tl/6nL5y0bMaQ==" crossorigin="anonymous"></script>

    <!-- allows gsap on css-before -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/CSSRulePlugin.min.js" integrity="sha512-9F1xsW3TBG87UnyGcF1SrXph249h/eUKPRKJZVhXxW+OeDmCiBvU9/gLfOo5qEvGTjTxOr6YQrY4ImjL90IUyw==" crossorigin="anonymous"></script>

    <script>
        gsap.registerPlugin(CSSRulePlugin);

        const tl = gsap.timeline({defaults: { ease: Power2.easeOut}})
            btn = document.querySelector('button')
            rule = CSSRulePlugin.getRule("button::before"); //get the rule

        tl.to('.label', {opacity: 0, position: 'absolute', height: 0, duration: '.2s'})
            .to('button', {borderRadius: '50%', width:'2.5em', height: '2.5em', ease: Elastic.easeOut.config(.7, 0.3), duration: 1.2}, "-=.5s")
            .to(rule, {borderRadius: '50%'}, "-=1s")
            .to('svg', {strokeDasharray: '90 103'}, "-=.7")
            .to('path', {attr: {d: 'M144.531,235.3l16.159-17.754-16.159-17.693'} }, "+=1")
            .to('p', { clipPath: 'circle(100% at 50% 50%)', duration: 1.2});

        tl.pause();

        btn.addEventListener('click', () => {
            tl.play();
        })
        
    </script>
</body>
</html>